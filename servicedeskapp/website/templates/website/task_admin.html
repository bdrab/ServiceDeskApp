{% extends 'main.html' %}
{% load static %}


{% block head-content %}
    <script defer src="{% static 'js/task-admin-js.js' %}" ></script>
    <link rel="stylesheet" href="{% static 'styles/inc-style.css' %}">
{% endblock %}


{% block body-content %}
<!-- different method to show inc detailss-->
<!--<div class="container">-->
<!--        <div class="row">-->
<!--            <div class="col-lg">-->
<!--              <h6>Ticket number: <input disabled class="input-border" type="text" id="inc-number" value="{{ticket.number}}"></h6>-->
<!--            </div>-->
<!--            <div class="col-lg">-->
<!--            {% if ticket.state %}-->
<!--                <h6>State: <input disabled class="input-border" type="text"  value="Open"></h6>-->
<!--            {% else %}-->
<!--                <h6>State: <input disabled class="input-border" type="text"  value="Closed"></h6>-->
<!--            {% endif %}-->
<!--            </div>-->
<!--        </div>-->

<!--        <div class="row">-->
<!--            <div class="col-lg">-->
<!--                <h6>Opened: <input disabled class="input-border" type="text"  value="{{ticket.created}}"></h6>-->
<!--            </div>-->
<!--            <div class="col-lg">-->
<!--                <h6>Opened by: <input disabled class="input-border" type="text"  value="{{ticket.owner}}"></h6>-->
<!--            </div>-->
<!--        </div>-->

<!--        <div class="row">-->
<!--            <div class="col-lg">-->
<!--                <h6>Assigned to: <input disabled class="input-border" type="text"  value="{{ticket.assigned_to.first_name}} {{ticket.assigned_to.last_name}}"></h6>-->
<!--            </div>-->
<!--            <div class="col-lg">-->
<!--                <h6>Assignment Group : <input disabled class="input-border" type="text"  value="{{ticket.assignment_group.name}}"></h6>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<div class="body-content">

    <div class="knowledge-div">
        <div class="tags-div">
            {% for tag in tags %}
                <span class="tag">{{tag.name}}</span>
            {% endfor %}
            <br>
            <div class="submit-tag">
                <input class="input-border" id="add-tag-input" type="text"  value="" placeholder="Tag name">
                <button type="button" id="add-tag-btn" class="btn btn-outline-secondary btn-submit">Add tag!</button>
            </div>
        </div>
        <div class="knowledge-files">
            {% for file in knowledge_files %}
            <div class="knowledge-file">
                <h6><a href="/{{file.file}}"> ðŸ“Ž {{file.name}}.{{file.extension}}</a></h6>
            </div>
            {% endfor %}
        </div>
        <div class="add-knowledge-file">

        </div>


    </div>
    {% if user.is_authenticated %}
        <div class="task-div">
            <h6>Ticket number: <input disabled class="input-border" type="text" id="inc-number" value="{{ticket.number}}"></h6>
            <h6>Opened: <input disabled class="input-border" type="text"  value="{{ticket.created}}"></h6>
            <h6>Opened by: <input disabled class="input-border" type="text"  value="{{ticket.owner}}"></h6>
            <h6>Assignment Group : <input disabled class="input-border" type="text"  value="{{ticket.assignment_group.name}}"></h6>
            <h6>Assigned to: <input disabled class="input-border" type="text"  value="{{ticket.assigned_to.first_name}} {{ticket.assigned_to.last_name}}"></h6>
            {% if ticket.state %}
                <h6>State: <input disabled class="input-border" type="text"  value="Open"></h6>
            {% else %}
                <h6>State: <input disabled class="input-border" type="text"  value="Closed"></h6>
            {% endif %}

            {% if ticket.assigned_to.first_name == None %}
                <button type="button" id="start-work-btn">Start Work!</button>
            {% endif %}

            {% if ticket.state %}
                <button type="button" id="resolve-inc-btn">Resolve</button>
            {% else %}
                <button type="button" id="resolve-inc-btn">Reopen</button>
            {% endif %}

            <h6>Description: {{ticket.description}}</h6>
        </div>

        <div class="attachments-div">
         <div><h3>Attachments</h3></div>
            <br><br>
            {% for attachment in attachments %}
                <h6><a href="/{{attachment.file}}"> ðŸ“Ž {{attachment.name}}.{{attachment.extension}}</a></h6>
            {% endfor %}

            <div class="attachment-picker">
                    <label for="file">
                        <div id="drop_zone">
                            <p class="drop-zone-text">Click here <br>or<br> drag one or more files to this <i>drop zone</i>.<br><br>max 4MB/image</p>
<!--                            <div class="message-div upload-message-div">-->
<!--                                {% for message in messages %}-->
<!--                                    <h6>{{message}}</h6>-->
<!--                                {% endfor %}-->
<!--                            </div>-->
                            <br><br>
                            <button type="submit" class="btn btn-outline-secondary btn-submit">Submit</button>
                        </div>
                    </label><br>
                    <input class="hide" type="file" id="file" name="photo" multiple />
                    <p class="chosen-files"><ul class="chosen-files-list"></ul></p>
            </div>
        </div>

        <div class="work-notes">
            <div class="new-note">
                <input type="text" class="input-border" id="note"  placeholder="Work note...">
                <button type="button" id="send-note-btn">Send Note</button>
            </div>
            {% for message in messages %}
                <div class="work-note">
                    {{message.created}} Posted by: {{message.author.first_name}} {{message.author.last_name}}<br>
                    {{message.content}}
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}
